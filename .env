# ==========================================================================================================
# RIDE FLEX - UNIVERSAL ENVIRONMENT CONFIGURATION
# This file contains all service configurations for the Ride Flex application
# Copy this to .env and adjust values for your environment
# ==========================================================================================================

# ==========================================================================================================
# ENVIRONMENT MODE
# ==========================================================================================================
ENVIRONMENT=dev
SPRING_PROFILES_ACTIVE=dev
APP_VERSION=1.0.0

# ==========================================================================================================
# KEYCLOAK CONFIGURATION - Service-to-Service Authentication
# ==========================================================================================================
KEYCLOAK_SERVER_URL=https://auth.rydeflexi.com/
KEYCLOAK_REALMS_HOST=51.75.119.133

# Service Authentication Realm
SERVICE_AUTH_REALM=service-authentication
SERVICE_AUTH_ISSUER_URI=https://auth.rydeflexi.com/realms/service-authentication
SERVICE_AUTH_TOKEN_URI=https://auth.rydeflexi.com/realms/service-authentication/protocol/openid-connect/token
SERVICE_AUTH_JWKS_URI=https://auth.rydeflexi.com/realms/service-authentication/protocol/openid-connect/certs

# User Authentication Realm
USER_AUTH_REALM=user-authentication
USER_AUTH_ISSUER_URI=https://auth.rydeflexi.com/realms/user-authentication
USER_AUTH_TOKEN_URI=https://auth.rydeflexi.com/realms/user-authentication/protocol/openid-connect/token
USER_AUTH_JWKS_URI=https://auth.rydeflexi.com/realms/user-authentication/protocol/openid-connect/certs
USER_AUTH_AUTH_URL=https://auth.rydeflexi.com/realms/user-authentication/protocol/openid-connect/auth

# Keycloak Admin Credentials
KEYCLOAK_ADMIN_REALM=user-authentication
KEYCLOAK_ADMIN_CLIENT_ID=auth-client
KEYCLOAK_ADMIN_CLIENT_SECRET=61wbbZiDccvr53XUfEq0WOXvNtSdu1Sy

# OAuth2 Client for Swagger/Frontend
OAUTH2_CLIENT_ID=auth2-client
OAUTH2_CLIENT_SECRET=mnGbk01IbCyIdSP8LEhniIcoEuQ9LQPJ

# Service-to-Service Client (Generic)
SERVICE_CLIENT_ID=svc-auth
SERVICE_CLIENT_SECRET=pKPGmkqLJIJmqjnwCRLjbrVH27eD0oL3

# ==========================================================================================================
# GATEWAY SERVICE (8080)
# ==========================================================================================================
GATEWAY_SERVICE_PORT=8080
GATEWAY_SERVICE_HOST=localhost
GATEWAY_SERVICE_URL=http://localhost:8080

# ==========================================================================================================
# DISCOVERY SERVICE (8761) - Eureka Server
# ==========================================================================================================
DISCOVERY_SERVICE_PORT=8761
DISCOVERY_SERVICE_HOST=localhost
DISCOVERY_SERVICE_URL=http://localhost:8761/eureka

# ==========================================================================================================
# AUTH SERVICE (8081)
# ==========================================================================================================
AUTH_SERVICE_PORT=8081
AUTH_SERVICE_HOST=localhost
AUTH_SERVICE_URL=http://localhost:8081
RD_AUTH_SERVER_PORT=8081
RD_AUTH_SERVER_HOST=localhost
RD_AUTH_ISSUER_URI=https://auth.rydeflexi.com/realms/service-authentication
RD_USER_AUTH_ISSUER_URI=https://auth.rydeflexi.com/realms/user-authentication

# ==========================================================================================================
# USER SERVICE (8086)
# ==========================================================================================================
USER_SERVICE_PORT=8086
USER_SERVICE_HOST=localhost
USER_SERVICE_URL=http://localhost:8086

# ==========================================================================================================
# VEHICLE SERVICE (8087)
# ==========================================================================================================
VEHICLE_SERVICE_PORT=8087
VEHICLE_SERVICE_HOST=localhost
VEHICLE_SERVICE_URL=http://localhost:8087

# ==========================================================================================================
# BOOKING SERVICE (8082)
# ==========================================================================================================
BOOKING_SERVICE_PORT=8082
BOOKING_SERVICE_HOST=localhost
BOOKING_SERVICE_URL=http://localhost:8082

# ==========================================================================================================
# PAYMENT SERVICE (8083)
# ==========================================================================================================
PAYMENT_SERVICE_PORT=8083
PAYMENT_SERVICE_HOST=localhost
PAYMENT_SERVICE_URL=http://localhost:8083

# ==========================================================================================================
# PRICING SERVICE (8085)
# ==========================================================================================================
PRICING_SERVICE_PORT=8085
PRICING_SERVICE_HOST=localhost
PRICING_SERVICE_URL=http://localhost:8085

# ==========================================================================================================
# MAIL SERVICE (8084)
# ==========================================================================================================
MAIL_SERVICE_PORT=8084
MAIL_SERVICE_HOST=localhost
MAIL_SERVICE_URL=http://localhost:8084
MAIL_SERVER_PORT=8084
SPRING_MAIL_APPLICATION_NAME=mail-service

# ==========================================================================================================
# BFF SERVICES
# ==========================================================================================================

# Client BFF (8089)
CLIENT_BFF_PORT=8089
CLIENT_BFF_HOST=localhost
CLIENT_BFF_URL=http://localhost:8089

# Owner BFF (8088)
OWNER_BFF_PORT=8088
OWNER_BFF_HOST=localhost
OWNER_BFF_URL=http://localhost:8088
OWNERBFF_CLIENT_ID=ownerbff
OWNERBFF_CLIENT_SECRET=EQ4uAyz2stawcDGiSBzCWVZTVCn82Qh7

# Admin BFF (8090)
ADMIN_BFF_PORT=8090
ADMIN_BFF_HOST=localhost
ADMIN_BFF_URL=http://localhost:8090

# ==========================================================================================================
# DATABASE CONFIGURATIONS
# ==========================================================================================================

# PostgreSQL Common Settings
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_USERNAME=postgres
POSTGRES_PASSWORD=postgres

# User Service Database (PostgreSQL)
USER_DB_NAME=userdb
USER_DB_PORT=5433
USER_DB_USERNAME=userservice
USER_DB_PASSWORD=userservice123
USER_DATASOURCE_URL=jdbc:postgresql://localhost:5433/userdb

# Vehicle Service Database (PostgreSQL)
VEHICLE_DB_NAME=vehicledb
VEHICLE_DB_PORT=5437
VEHICLE_DB_USERNAME=vehicleservice
VEHICLE_DB_PASSWORD=vehicleservice123
VEHICLE_DATASOURCE_URL=jdbc:postgresql://localhost:5437/vehicledb

# Pricing Service Database (PostgreSQL)
PRICING_DB_NAME=pricingdb
PRICING_DB_PORT=5435
PRICING_DB_USERNAME=pricingservice
PRICING_DB_PASSWORD=pricingservice123
PRICING_DATASOURCE_URL=jdbc:postgresql://localhost:5435/pricingdb

# Payment Service Database (PostgreSQL)
PAYMENT_DB_NAME=paymentdb
PAYMENT_DB_PORT=5436
PAYMENT_DB_USERNAME=paymentservice
PAYMENT_DB_PASSWORD=paymentservice123
PAYMENT_DATASOURCE_URL=jdbc:postgresql://localhost:5436/paymentdb

# Mail Service Database (PostgreSQL)
MAIL_DB_NAME=maildb
MAIL_DB_PORT=5434
MAIL_DB_USERNAME=mailservice
MAIL_DB_PASSWORD=mailservice123
SPRING_DATASOURCE_URL=jdbc:postgresql://localhost:5434/maildb

# MongoDB (Booking Service)
MONGODB_HOST=localhost
MONGODB_PORT=27017
MONGODB_USERNAME=root
MONGODB_PASSWORD=secret
MONGODB_DATABASE=ridedb
MONGODB_AUTH_SOURCE=admin
SPRING_DATA_MONGODB_URI=mongodb://root:secret@localhost:27017/ridedb?authSource=admin

# ==========================================================================================================
# RABBITMQ CONFIGURATION
# ==========================================================================================================
RABBITMQ_HOST=localhost
RABBITMQ_PORT=5672
RABBITMQ_USERNAME=guest
RABBITMQ_PASSWORD=guest
RABBITMQ_VIRTUAL_HOST=/
RABBITMQ_CONNECTION_TIMEOUT=5000
RABBITMQ_REQUESTED_HEARTBEAT=30

# ==========================================================================================================
# REDIS CONFIGURATION (for caching and session)
# ==========================================================================================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_TIMEOUT=2000
REDIS_DATABASE=0

# ==========================================================================================================
# KAFKA CONFIGURATION (for streaming)
# ==========================================================================================================
KAFKA_BOOTSTRAP_SERVERS=localhost:9092
KAFKA_BROKER_HOST=localhost
KAFKA_BROKER_PORT=9092

# ==========================================================================================================
# MAIL SERVICE CONFIGURATION
# ==========================================================================================================
MAIL_HOST=51.75.119.133
MAIL_PORT=1025
MAIL_USERNAME=
MAIL_PASSWORD=
MAIL_PROTOCOL=smtp
MAIL_DEFAULT_ENCODING=UTF-8
MAIL_TEST_CONNECTION=false
MAIL_SMTP_AUTH=false
MAIL_STARTTLS_ENABLE=false
MAIL_STARTTLS_REQUIRED=false

# ==========================================================================================================
# CORS CONFIGURATION
# ==========================================================================================================
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8080,https://rydeflexi.com

# ==========================================================================================================
# LOGGING CONFIGURATION
# ==========================================================================================================
LOGGING_LEVEL_ROOT=INFO
LOGGING_LEVEL_RIDE_SERVICES=DEBUG
LOGGING_LEVEL_SPRING_SECURITY=INFO
LOGGING_LEVEL_SPRING_DATA=DEBUG

# ==========================================================================================================
# JPA/HIBERNATE CONFIGURATION
# ==========================================================================================================
SPRING_JPA_HIBERNATE_DDL_AUTO=update
SPRING_JPA_SHOW_SQL=true
SPRING_JPA_FORMAT_SQL=true
SPRING_JPA_PROPERTIES_HIBERNATE_JDBC_BATCH_SIZE=20
SPRING_JPA_PROPERTIES_HIBERNATE_ORDER_INSERTS=true
SPRING_JPA_PROPERTIES_HIBERNATE_ORDER_UPDATES=true

# ==========================================================================================================
# HIKARI CONNECTION POOL CONFIGURATION
# ==========================================================================================================
HIKARI_MAXIMUM_POOL_SIZE=10
HIKARI_MINIMUM_IDLE=5
HIKARI_CONNECTION_TIMEOUT=30000
HIKARI_IDLE_TIMEOUT=600000
HIKARI_MAX_LIFETIME=1800000

# ==========================================================================================================
# ACTUATOR CONFIGURATION
# ==========================================================================================================
MANAGEMENT_ENDPOINTS_WEB_EXPOSURE_INCLUDE=health,info,metrics,prometheus
MANAGEMENT_ENDPOINT_HEALTH_SHOW_DETAILS=when-authorized

# ==========================================================================================================
# SWAGGER/OPENAPI CONFIGURATION
# ==========================================================================================================
SPRINGDOC_SWAGGER_UI_ENABLED=true
SPRINGDOC_API_DOCS_ENABLED=true
SPRINGDOC_API_DOCS_PATH=/v3/api-docs
SPRINGDOC_SWAGGER_UI_PATH=/swagger-ui.html
SPRINGDOC_SWAGGER_UI_OPERATIONS_SORTER=method
SPRINGDOC_SWAGGER_UI_TAGS_SORTER=alpha
SPRINGDOC_SWAGGER_UI_TRY_IT_OUT_ENABLED=true

# ==========================================================================================================
# KUBERNETES / DOCKER CONFIGURATION
# ==========================================================================================================
DOCKER_NETWORK=ride-network
KUBERNETES_ENABLED=false

# ==========================================================================================================
# VPS / PRODUCTION CONFIGURATION
# ==========================================================================================================
VPS_IP_ADDRESS=51.75.119.133
PRODUCTION_DOMAIN=rydeflexi.com

# ==========================================================================================================
# APPLICATION SPECIFIC CONFIGURATIONS
# ==========================================================================================================

# Liquibase
SPRING_LIQUIBASE_ENABLED=false

# Jackson
SPRING_JACKSON_SERIALIZATION_WRITE_DATES_AS_TIMESTAMPS=false
SPRING_JACKSON_SERIALIZATION_FAIL_ON_EMPTY_BEANS=false

# Web Resources
SPRING_WEB_RESOURCES_ADD_MAPPINGS=true

# ==========================================================================================================
# SERVICE DISCOVERY (Eureka) CONFIGURATION
# ==========================================================================================================
EUREKA_CLIENT_SERVICE_URL_DEFAULT_ZONE=http://localhost:8761/eureka
EUREKA_CLIENT_REGISTER_WITH_EUREKA=true
EUREKA_CLIENT_FETCH_REGISTRY=true
EUREKA_INSTANCE_PREFER_IP_ADDRESS=false
EUREKA_INSTANCE_HOSTNAME=localhost

# ==========================================================================================================
# FEATURE FLAGS
# ==========================================================================================================
FEATURE_MONGODB_ENABLED=true
FEATURE_KAFKA_ENABLED=true
FEATURE_REDIS_ENABLED=true
FEATURE_RABBITMQ_ENABLED=true

# ==========================================================================================================
# RETRY CONFIGURATION
# ==========================================================================================================
RETRY_INITIAL_INTERVAL=3000
RETRY_MAX_ATTEMPTS=3
RETRY_MULTIPLIER=2.0
RETRY_MAX_INTERVAL=10000

# ==========================================================================================================
# SECURITY & ENCRYPTION
# ==========================================================================================================
SECURITY_ENABLE_HTTPS=true
SECURITY_SESSION_TIMEOUT=1800
SECURITY_JWT_EXPIRATION=3600000

# ==========================================================================================================
# MONITORING & METRICS
# ==========================================================================================================
METRICS_ENABLED=true
PROMETHEUS_ENABLED=true
TRACING_ENABLED=false
